<!-- TO DO:
 - download chevron svg from figma to replace the existing
 - align chevron to the left

-->

<!-- TO DO:
 Nath: Fix Animation
 - remove the hyperlink in text in each div inside the summary
-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JurisTopic - Results</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />

    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        poppins: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        'brand-blue': {
                            DEFAULT: '#5060FF',
                            dark: '#3944B5',
                            light: '#8A94FF',
                            bg: 'rgba(201, 206, 255, 0.3)' 
                        },
                        'brand-gray': {
                            DEFAULT: '#3B3B3B',
                            light: '#F5F5FB',
                            border: '#EBEBEB',
                            text: '#555555' 
                        }
                    },
                    boxShadow: {
                        'primary': '0px 12px 20px rgba(80, 96, 255, 0.12)',
                        'button': '0px 10px 40px rgba(80, 96, 255, 0.25)',
                    }
                }
            }
        }
    </script>

    <style>
        details > summary {
            list-style: none; 
        }
        details > summary::-webkit-details-marker {
            display: none; 
        }
        details[open] > summary .chevron {
            transform: rotate(90deg);
        }
    </style>

</head>
<body class="bg-brand-gray-light font-poppins text-brand-gray-text antialiased">
    <div class="min-h-screen w-full flex flex-col items-center py-8 sm:py-12 md:py-16 lg:py-20 xl:py-28 px-3 sm:px-4">
        <main class="w-full max-w-5xl flex flex-col items-center gap-6 sm:gap-8 md:gap-10">

            <!-- Header -->
            <header class="text-center flex flex-col items-center gap-1 sm:gap-2 max-w-xl px-2">
                <a href="search.html" class="no-underline">
                    <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-tight">
                        <span class="text-brand-gray">Juris</span><span class="text-brand-blue">Topic</span>
                    </h1>
                </a>
                <p class="text-sm sm:text-base md:text-lg text-brand-gray-text px-4">
                    A Smarter Way to Explore Philippine Legal Topics
                </p>
            </header>

            <!-- Topic Hierarchy Card -->
            <section class="w-full bg-white rounded-xl sm:rounded-2xl shadow-primary border border-brand-gray-border p-4 sm:p-6 md:p-8 lg:p-10 flex flex-col gap-4 sm:gap-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-semibold text-brand-gray">Topic Hierarchy</h2>
                <div class="border border-brand-gray-border rounded-lg p-3 sm:p-4 space-y-2">

                <!-- Root Level: Criminal Law -->
                <div class="space-y-3 sm:space-y-4">
                    <details open class="group">
                        <summary class="flex items-center justify-between cursor-pointer p-3 rounded-lg hover:bg-brand-gray-light transition-colors">
                            <div class="flex items-center gap-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="chevron h-5 w-5 text-brand-gray-text transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                                <img src="src/doc_icon.svg" alt="How it works icon" class="h-6 w-6" />
                                <span class="topic-title text-lg font-semibold text-brand-gray" data-topic="{{topic_name }} (3)">{{topic_name}} (3)</span>
                            </div>
                        </summary>
                        
                        <!-- Keywords for Closest Topic -->
                        <div class="flex flex-wrap items-center gap-1.5 sm:gap-2 pt-2 pb-3 sm:pb-4 pl-8 sm:pl-10 md:pl-12">
                            {% for word in top_words %}
                            <span class="bg-brand-blue-bg border border-brand-blue-light text-brand-blue-dark rounded-full px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-medium">{{ word }}</span>
                        {% endfor %}
                        </ul>
                        </div>

                        <!-- Nested Children of Criminal Law -->
                        <!-- <div class="ml-4 sm:ml-6 pl-3 sm:pl-6 border-l-2 border-brand-gray-border space-y-3 sm:space-y-4">
                            
                            <details open class="group">
                                <summary class="flex items-center justify-between cursor-pointer p-3 rounded-lg hover:bg-brand-gray-light transition-colors">
                                    <div class="flex items-center gap-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="chevron h-5 w-5 text-brand-gray-text transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                                        <img src="src/doc_icon.svg" alt="How it works icon" class="h-6 w-6" />
                                        <span class="topic-title text-lg font-semibold text-brand-gray" data-topic="Property Crimes (8)">Property Crimes (8)</span>
                                    </div>
                                </summary>
                                
                                <div class="flex flex-wrap items-center gap-1.5 sm:gap-2 pt-2 pb-3 sm:pb-4 pl-8 sm:pl-10 md:pl-12">
                                     <span class="bg-brand-blue-bg border border-brand-blue-light text-brand-blue-dark rounded-full px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-medium">ownership</span>
                                     <span class="bg-brand-blue-bg border border-brand-blue-light text-brand-blue-dark rounded-full px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-medium">possession</span>
                                </div>

                                
                                <div class="ml-4 sm:ml-6 pl-3 sm:pl-6 border-l-2 border-brand-gray-border space-y-3 sm:space-y-4">
                                    <details open class="group">
                                        <summary class="flex items-center justify-between cursor-pointer p-3 rounded-lg hover:bg-brand-gray-light transition-colors">
                                            <div class="flex items-center gap-3">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="chevron h-5 w-5 text-brand-gray-text transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                                                <img src="src/doc_icon.svg" alt="How it works icon" class="h-6 w-6" />
                                                <span class="topic-title text-lg font-semibold text-brand-gray" data-topic="Theft (5)">Theft (5)</span>
                                            </div>
                                        </summary>
                                        <div class="flex flex-wrap items-center gap-1.5 sm:gap-2 pt-2 pb-3 sm:pb-4 pl-8 sm:pl-10 md:pl-12">
                                             <span class="bg-brand-blue-bg border border-brand-blue-light text-brand-blue-dark rounded-full px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-medium">Article 308</span>
                                             <span class="bg-brand-blue-bg border border-brand-blue-light text-brand-blue-dark rounded-full px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-medium">intent to gain</span>
                                             <span class="bg-brand-blue-bg border border-brand-blue-light text-brand-blue-dark rounded-full px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-medium">without consent</span>
                                        </div>
                                    </details>
                                </div>
                            </details>
                        </div> -->
                    </details>
                </div>
                </div>
            </section>

            <!-- Relevant Documents Card -->
            <section id="relevant-docs" class="hidden  w-full bg-white rounded-2xl shadow-primary border border-brand-gray-border p-6 sm:p-8 md:p-10 flex flex-col gap-4" data-show="">
                <h2 class="text-2xl font-semibold text-brand-gray">Relevant Documents for <span class="text-brand-blue">{{topic_name}}</span></h2>
                <div class="flex flex-col divide-y divide-brand-gray-border">
                    {% for doc in rep_docs %}
                    <div class="py-3 sm:py-4">
                        <p class="text-xs sm:text-sm text-brand-gray-text">{{ doc.case_number }}</p>
                        <a href="{{ doc.case_link }}" class="text-sm sm:text-base md:text-lg font-medium text-brand-blue hover:underline block mt-1" target="_blank">{{ doc.case_title }}</a>
                    {% endfor %}
                    </div>
                </div>
            </section>

            <!-- Footer Action -->
            <footer class="mt-2 sm:mt-4">
                <a href="/" class="inline-flex items-center gap-2 sm:gap-3 bg-white rounded-lg sm:rounded-xl shadow-button border border-brand-gray-border px-6 sm:px-8 py-2.5 sm:py-3 text-base sm:text-lg font-semibold text-brand-gray hover:shadow-lg transition-shadow duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                    </svg>
                    Start a New Search
                </a>
            </footer>
            </body>
            </html>

        </main>
    </div>

    <script>
        const summaries = document.querySelectorAll('summary');
        const docsSection = document.getElementById('relevant-docs');
        const topicLabel = docsSection.querySelector('span.text-brand-blue');

        summaries.forEach(summary => {
            summary.addEventListener('click', (e) => {
                const isChevron = e.target.closest('.chevron');

                if (!isChevron) {
                    e.preventDefault(); 
    
                    const topicSpan = summary.querySelector('.topic-title');
                    if (topicSpan) {
                        const selectedTopic = topicSpan.dataset.topic;
                        topicLabel.textContent = selectedTopic;
                        docsSection.classList.remove('hidden');
                        docsSection.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });

            const summaries = document.querySelectorAll('summary');
            summary.addEventListener('click', (e) => {
                const isChevron = e.target.closest('.chevron');
                if (!isChevron) {
                    e.preventDefault();
                }
            });
        });
    </script>

</body>
</html>